{
  "version": 3,
  "sources": ["../../frontend/src/i18n/i18n.ts", "../../frontend/src/router.ts", "../../frontend/src/api/http.ts", "../../frontend/src/ui/render_program.ts", "../../frontend/src/telegram.ts", "../../frontend/src/views/program_view.ts", "../../frontend/src/views/history.ts", "../../frontend/src/index.ts"],
  "sourcesContent": ["export type LangCode = 'en' | 'ru' | 'uk';\nexport const LANG_MAP: Record<string, LangCode> = { eng: 'en', en: 'en', ru: 'ru', ua: 'uk', uk: 'uk' };\n\nfunction resolveLangCode(raw?: string): LangCode {\n  if (!raw) return 'en';\n  const normalized = raw.toLowerCase();\n  const direct = LANG_MAP[normalized];\n  if (direct) return direct;\n  const [base] = normalized.split('-');\n  return LANG_MAP[base] ?? 'en';\n}\n\nexport const fallbackEn = {\n  history: 'History',\n  created: 'Created',\n  ai_label: 'AI',\n  service_unavailable: 'Service temporarily unavailable',\n  unauthorized: 'Unauthorized',\n  not_found: 'Not found',\n  server_error: 'Server error',\n  unexpected_error: 'Unexpected error',\n  no_programs: 'No programs found',\n  sort_newest: 'Sort: Newest',\n  sort_oldest: 'Sort: Oldest',\n  show_ai: 'Show AI workout plans',\n  back: 'Back',\n  open_from_telegram: 'Open this page from Telegram.',\n  'program.title': 'Workout Program',\n  'program.created': 'Created: {date}',\n  'program.view_history': 'View History',\n  'program.week': 'Week {n}',\n  'program.day': 'Day {n} \u2014 {title}',\n  'program.day.rest': 'Rest Day',\n  retry: 'Retry',\n  'page.program': 'Program',\n  'page.history': 'History'\n} as const;\n\nexport type TranslationKey = keyof typeof fallbackEn;\nexport type TemplateVars = Record<string, string | number>;\n\ntype Messages = Partial<Record<TranslationKey, string>>;\nlet messages: Messages = {};\n\nasync function loadMessages(code: LangCode): Promise<void> {\n  const base = (window as any).__STATIC_PREFIX__ || '/static/';\n  try {\n    const res = await fetch(`${base}i18n/${code}.json`, { cache: 'no-store' });\n    messages = res.ok ? ((await res.json()) as Messages) : { ...fallbackEn };\n  } catch {\n    messages = { ...fallbackEn };\n  }\n}\n\nfunction interpolate(template: string, vars?: TemplateVars): string {\n  if (!vars) return template;\n  return template.replace(/\\{(\\w+)\\}/g, (_, key: string) => {\n    const value = vars[key];\n    return value === undefined || value === null ? '' : String(value);\n  });\n}\n\nexport function t<K extends TranslationKey>(key: K, vars?: TemplateVars): string {\n  const template = messages[key] ?? fallbackEn[key];\n  return interpolate(template, vars);\n}\n\nexport async function applyLang(): Promise<LangCode>;\nexport async function applyLang(raw: string | undefined): Promise<LangCode>;\nexport async function applyLang(raw?: string): Promise<LangCode> {\n  let incoming = raw;\n  try {\n    const tg = (window as any).Telegram?.WebApp;\n    if (!incoming && tg?.initDataUnsafe?.user?.language_code) {\n      incoming = tg.initDataUnsafe.user.language_code;\n    }\n  } catch {\n  }\n\n  const code = resolveLangCode(incoming);\n  document.documentElement.lang = code;\n  await loadMessages(code);\n  return code;\n}\n\nexport function formatDate(ts: number, locale: string): string {\n  return new Date(ts * 1000).toLocaleDateString(locale, {\n    day: '2-digit',\n    month: 'short',\n    year: 'numeric'\n  });\n}\n", "export type ProgramRoute = { kind: 'program'; source: 'direct' | 'subscription' };\nexport type HistoryRoute = { kind: 'history' };\nexport type Route = ProgramRoute | HistoryRoute;\n\ntype NavCb = (r: Route) => void;\nlet listeners: NavCb[] = [];\n\nexport function parseRoute(loc: Location): Route {\n  const url = new URL(loc.href);\n  const type = (url.searchParams.get('type') || 'program').toLowerCase();\n  if (type === 'history') return { kind: 'history' };\n  const source = (url.searchParams.get('source') || 'direct') as 'direct' | 'subscription';\n  return { kind: 'program', source };\n}\n\nexport function goToHistory(): void {\n  const url = new URL(location.href);\n  url.searchParams.set('type', 'history');\n  history.pushState({}, '', url.toString());\n  emit();\n}\n\nexport function goToProgram(source: 'direct' | 'subscription' = 'direct'): void {\n  const url = new URL(location.href);\n  url.searchParams.set('type', 'program');\n  url.searchParams.set('source', source);\n  history.pushState({}, '', url.toString());\n  emit();\n}\n\nfunction emit() {\n  const r = parseRoute(location);\n  listeners.forEach((cb) => cb(r));\n}\n\nexport function initRouter(): void {\n  emit();\n}\n\nexport function onRouteChange(cb: NavCb): void {\n  listeners.push(cb);\n}\n\nwindow.addEventListener('popstate', () => emit());\n", "import { Locale, Program, ProgramResp, ProgramStructuredResponse } from './types';\n\nconst KNOWN_LOCALES: readonly Locale[] = ['en', 'ru', 'uk'];\nconst LOCALE_ALIASES: Record<string, Locale> = { ua: 'uk' };\n\nfunction normalizeLocale(raw: string | null | undefined, fallback: Locale): Locale {\n  if (!raw) return fallback;\n  const lower = raw.toLowerCase();\n  if (lower in LOCALE_ALIASES) {\n    return LOCALE_ALIASES[lower];\n  }\n  if ((KNOWN_LOCALES as readonly string[]).includes(lower)) {\n    return lower as Locale;\n  }\n  return fallback;\n}\n\nexport class HttpError extends Error {\n  readonly status: number;\n  constructor(status: number, message: string) {\n    super(message);\n    this.status = status;\n  }\n}\n\nexport function statusToMessage(status: number): string {\n  switch (status) {\n    case 401:\n    case 403:\n      return 'unauthorized';\n    case 404:\n      return 'not_found';\n    case 500:\n      return 'server_error';\n    default:\n      return 'unexpected_error';\n  }\n}\n\nexport type LoadedProgram =\n  | { kind: 'structured'; program: Program; locale: Locale }\n  | { kind: 'legacy'; programText: string; locale: Locale; createdAt?: string | null };\n\nexport async function getJSON<T>(url: string, options: RequestInit = {}): Promise<T> {\n  const resp = await fetch(url, options);\n  if (!resp.ok) {\n    throw new HttpError(resp.status, statusToMessage(resp.status));\n  }\n  return (await resp.json()) as T;\n}\n\ntype GetProgramOpts = {\n  initData: string;\n  source: 'direct' | 'subscription';\n  signal?: AbortSignal;\n};\n\nfunction isStructuredProgram(data: ProgramResp): data is ProgramStructuredResponse {\n  return typeof data === 'object' && data !== null && 'days' in data;\n}\n\nexport async function getProgram(\n  programId: string,\n  opts: GetProgramOpts\n): Promise<LoadedProgram>;\nexport async function getProgram(\n  programId: string,\n  locale: Locale,\n  opts: GetProgramOpts\n): Promise<LoadedProgram>;\nexport async function getProgram(\n  programId: string,\n  a: Locale | GetProgramOpts,\n  b?: GetProgramOpts\n): Promise<LoadedProgram> {\n  let locale: Locale = 'en';\n  let opts: GetProgramOpts;\n\n  if (typeof a === 'string') {\n    locale = a;\n    opts = b as GetProgramOpts;\n  } else {\n    try {\n      const tg = (window as any).Telegram?.WebApp;\n      const lc = tg?.initDataUnsafe?.user?.language_code;\n      if (lc && (['en', 'ru', 'uk'] as Locale[]).includes(lc)) {\n        locale = lc as Locale;\n      }\n    } catch {\n    }\n    opts = a;\n  }\n\n  const params = new URLSearchParams({ locale, source: opts.source });\n  if (programId) {\n    params.set('program_id', programId);\n  }\n  const url = new URL('api/program/', window.location.href);\n  params.forEach((value, key) => {\n    url.searchParams.set(key, value);\n  });\n  const headers: Record<string, string> = {};\n  if (opts.initData) headers['X-Telegram-InitData'] = opts.initData;\n\n  const data = await getJSON<ProgramResp>(url.toString(), { headers, signal: opts.signal });\n\n  const fromResponse = (data as { language?: string | null }).language;\n  const resolvedLocale = normalizeLocale(fromResponse ?? (data as { locale?: string }).locale, locale);\n\n  if (isStructuredProgram(data)) {\n    const programLocale = normalizeLocale(data.locale, resolvedLocale);\n    return {\n      kind: 'structured',\n      program: {\n        ...data,\n        locale: programLocale,\n        created_at: data.created_at ?? null,\n        weeks: data.weeks ?? [],\n        days: data.days ?? []\n      },\n      locale: programLocale\n    };\n  }\n\n  const createdAtRaw = data.created_at;\n  let createdAt: string | null = null;\n  if (typeof createdAtRaw === 'number') {\n    createdAt = new Date(createdAtRaw * 1000).toISOString();\n  } else if (typeof createdAtRaw === 'string') {\n    createdAt = createdAtRaw;\n  }\n\n  return { kind: 'legacy', programText: data.program, locale: resolvedLocale, createdAt };\n}\n", "import { Day, Exercise, Locale, Program, Week } from '../api/types';\nimport { t } from '../i18n/i18n';\n\nexport type RenderedProgram = {\n  readonly fragment: DocumentFragment;\n};\n\nexport function fmtDate(value: string | number, locale: string): string {\n  const date = typeof value === 'number' ? new Date(value * 1000) : new Date(value);\n  if (Number.isNaN(date.getTime())) {\n    return String(value);\n  }\n  return new Intl.DateTimeFormat(locale, {\n    day: 'numeric',\n    month: 'short',\n    year: 'numeric'\n  }).format(date);\n}\n\nfunction ensureWeeks(program: Program): Week[] {\n  if (program.weeks && program.weeks.length > 0) return program.weeks;\n  return [{ index: 1, days: program.days }];\n}\n\ntype LegacyExerciseParts = {\n  readonly name: string;\n  readonly details: string | null;\n};\n\nfunction parseLegacyExerciseLine(line: string): LegacyExerciseParts {\n  const trimmed = line.trim();\n  const withoutMarker = trimmed.replace(/^(?:\\d+[.)]\\s+|\\d+\\s*[\u2013\u2014-]\\s+|[-\u2013\u2014\u2022*+]\\s+)/, '');\n  const base = withoutMarker.length > 0 ? withoutMarker : trimmed;\n\n  const presentation = extractExercisePresentation(base);\n  if (presentation.extraDetails.length > 0) {\n    return { name: presentation.title, details: presentation.extraDetails.join(', ') };\n  }\n\n  const separators: Array<{ readonly pattern: RegExp; readonly offset: number }> = [\n    { pattern: /:/, offset: 1 },\n    { pattern: /\\s[\u2013\u2014-]\\s/, offset: 3 }\n  ];\n\n  for (const { pattern, offset } of separators) {\n    const match = base.match(pattern);\n    if (!match || match.index === undefined) continue;\n    const splitIndex = match.index;\n    const name = base.slice(0, splitIndex).trim();\n    const details = base.slice(splitIndex + offset).trim();\n    if (name.length > 0 && details.length > 0) {\n      return { name, details };\n    }\n  }\n\n  return { name: presentation.title, details: null };\n}\n\ntype ExercisePresentation = {\n  readonly title: string;\n  readonly extraDetails: readonly string[];\n};\n\nconst LEADING_NUMBER_PATTERN = /^\\s*\\d+(?:\\.\\d+)*\\s*[).:\\-\u2013\u2014]?\\s*/;\nconst NOISE_TOKEN_PATTERN = /\\bset\\s+\\d+\\b/i;\nconst NOISE_TOKEN_GLOBAL_PATTERN = /\\bset\\s+\\d+\\b/gi;\n\nfunction stripNoiseTokens(value: string): string {\n  return value.replace(NOISE_TOKEN_GLOBAL_PATTERN, ' ').replace(/\\s{2,}/g, ' ').trim();\n}\n\nfunction isNoiseToken(value: string): boolean {\n  const normalized = value.trim();\n  if (normalized.length === 0) {\n    return true;\n  }\n\n  if (!NOISE_TOKEN_PATTERN.test(normalized)) {\n    return false;\n  }\n\n  const cleaned = normalized.replace(/\\bset\\s+\\d+\\b/gi, '').trim();\n  return cleaned.length === 0;\n}\n\nfunction extractExercisePresentation(name: string): ExercisePresentation {\n  const raw = stripNoiseTokens(name.trim());\n  if (raw.length === 0) {\n    return { title: '', extraDetails: [] };\n  }\n\n  const normalized = raw\n    .replace(/\\s[\u2013\u2014-]\\s/g, ' | ')\n    .replace(/\\s*[:\uFF1A]\\s*/g, ' | ')\n    .replace(/[|\u00A6\u2502]/g, '|');\n\n  const segments = normalized\n    .split('|')\n    .map((segment) => stripNoiseTokens(segment))\n    .filter((segment) => segment.length > 0);\n\n  const primary = segments.shift() ?? raw;\n  const cleanedTitle = primary.replace(LEADING_NUMBER_PATTERN, '').trim();\n  const title = cleanedTitle.length > 0 ? cleanedTitle : primary;\n\n  const extraDetails = segments.filter((segment) => !isNoiseToken(segment));\n  const uniqueDetails = Array.from(new Set(extraDetails));\n  return { title, extraDetails: uniqueDetails };\n}\n\nfunction sanitizeNote(value: string | null | undefined): string | null {\n  if (!value) return null;\n  const trimmed = stripNoiseTokens(value);\n  if (trimmed.length === 0) return null;\n  if (isNoiseToken(trimmed)) return null;\n  return trimmed;\n}\n\nfunction createExerciseItem(ex: Exercise, index: number): HTMLLIElement {\n  const li = document.createElement('li');\n  li.className = 'program-exercise';\n\n  const details = document.createElement('details');\n  details.className = 'program-exercise-details';\n\n  const summary = document.createElement('summary');\n  summary.className = 'program-exercise-summary';\n  const presentation = extractExercisePresentation(ex.name);\n  const title = presentation.title.length > 0 ? presentation.title : ex.name;\n\n  const indexLabel = document.createElement('span');\n  indexLabel.className = 'program-exercise-index';\n  indexLabel.textContent = String(index + 1);\n\n  const titleLabel = document.createElement('span');\n  titleLabel.className = 'program-exercise-title';\n  titleLabel.textContent = title;\n\n  summary.appendChild(indexLabel);\n  summary.appendChild(titleLabel);\n  details.appendChild(summary);\n\n  const metaParts: string[] = [...presentation.extraDetails];\n  if (ex.sets !== null && ex.sets !== undefined && ex.sets !== '') {\n    metaParts.push(`Sets: ${String(ex.sets)}`);\n  }\n  if (ex.reps !== null && ex.reps !== undefined && ex.reps !== '') {\n    metaParts.push(`Reps: ${String(ex.reps)}`);\n  }\n  if (ex.weight) metaParts.push(`Weight: ${ex.weight.value} ${ex.weight.unit}`);\n  if (ex.equipment) metaParts.push(`Equipment: ${ex.equipment}`);\n\n  const content = document.createElement('div');\n  content.className = 'program-exercise-content';\n\n  const note = sanitizeNote(ex.notes);\n\n  const meaningfulMeta = metaParts.filter((part) => !isNoiseToken(part));\n\n  if (meaningfulMeta.length > 0) {\n    const meta = document.createElement('div');\n    meta.className = 'program-exercise-meta';\n    meta.textContent = meaningfulMeta.join(', ');\n    content.appendChild(meta);\n  }\n\n  if (note) {\n    const notes = document.createElement('p');\n    notes.className = 'program-exercise-notes';\n    notes.textContent = note;\n    content.appendChild(notes);\n  }\n\n  if (content.childElementCount > 0) {\n    details.appendChild(content);\n    li.appendChild(details);\n    return li;\n  }\n\n  details.classList.add('program-exercise-details-static');\n  summary.classList.add('program-exercise-summary-static');\n  li.appendChild(details);\n  return li;\n}\n\nfunction renderDay(day: Day): HTMLElement {\n  const details = document.createElement('details');\n  details.className = 'program-day';\n\n  const summary = document.createElement('summary');\n  summary.className = 'program-day-summary';\n\n  if (day.type === 'rest') {\n    summary.textContent = t('program.day.rest');\n    details.classList.add('program-day-rest');\n  } else {\n    const customTitle = day.title?.trim();\n    if (customTitle && customTitle.length > 0) {\n      summary.textContent = customTitle;\n    } else {\n      const fallback = t('program.day', { n: day.index, title: '' }).replace(/([\\s\u2014\u2013-])+$/, '');\n      summary.textContent = fallback;\n    }\n  }\n\n  details.appendChild(summary);\n\n  if (day.type === 'workout' && day.exercises) {\n    const list = document.createElement('ul');\n    list.className = 'program-day-list';\n    day.exercises.forEach((ex, idx) => {\n      list.appendChild(createExerciseItem(ex, idx));\n    });\n    details.appendChild(list);\n  }\n\n  return details;\n}\n\nexport function renderProgramDays(program: Program): RenderedProgram {\n  const fragment = document.createDocumentFragment();\n  const weeks = ensureWeeks(program);\n  weeks.forEach((week) => {\n    const wrap = document.createElement('section');\n    wrap.className = 'week';\n\n    const h2 = document.createElement('h2');\n    h2.textContent = t('program.week', { n: week.index });\n    wrap.appendChild(h2);\n\n    week.days.forEach((day) => {\n      wrap.appendChild(renderDay(day));\n    });\n\n    fragment.appendChild(wrap);\n  });\n  return { fragment };\n}\n\nexport function renderLegacyProgram(text: string, _locale: Locale): RenderedProgram {\n  const fragment = document.createDocumentFragment();\n  const parts = text.split(/\\n\\s*\\n/).filter((p) => p.trim().length > 0);\n\n  parts.forEach((block, idx) => {\n    const lines = block.split(/\\n/).map((l) => l.trim()).filter(Boolean);\n    if (lines.length === 0) return;\n\n    const exercises = lines.slice(1).map((line, i) => {\n      const parsed = parseLegacyExerciseLine(line);\n      return {\n        id: `ex-${idx + 1}-${i + 1}`,\n        name: parsed.name,\n        sets: null,\n        reps: null,\n        weight: null,\n        equipment: null,\n        notes: parsed.details\n      } satisfies Exercise;\n    });\n\n    const fakeDay = {\n      id: `legacy-${idx + 1}`,\n      index: idx + 1,\n      type: 'workout' as const,\n      title: lines[0],\n      exercises\n    } satisfies Day;\n    fragment.appendChild(renderDay(fakeDay));\n  });\n\n  return { fragment };\n}\n", "import type { Locale } from './api/types';\n\ntype TelegramUser = { language_code?: string };\ntype TelegramInitData = { user?: TelegramUser };\n\ntype TelegramThemeParams = {\n  bg_color?: string;\n  secondary_bg_color?: string;\n};\n\ntype TelegramWebApp = {\n  initData?: string;\n  initDataUnsafe?: TelegramInitData;\n  ready?: () => void;\n  expand?: () => void;\n  platform?: string;\n  setBackgroundColor?: (color: string) => void;\n  setHeaderColor?: (color: string | 'bg_color' | 'secondary_bg_color') => void;\n  themeParams?: TelegramThemeParams;\n};\n\ntype TelegramNamespace = { WebApp?: TelegramWebApp };\ntype TelegramWindow = Window & { Telegram?: TelegramNamespace };\n\nfunction getWebApp(): TelegramWebApp | null {\n  try {\n    const win = window as TelegramWindow;\n    return win.Telegram?.WebApp ?? null;\n  } catch {\n    return null;\n  }\n}\n\nexport function tmeReady(): void {\n  try { getWebApp()?.ready?.(); } catch {}\n}\n\nexport function tmeExpand(): void {\n  try { getWebApp()?.expand?.(); } catch {}\n}\n\nconst HEX_COLOR_PATTERN = /^#?(?:[0-9a-f]{3}|[0-9a-f]{6}|[0-9a-f]{8})$/i;\n\nfunction normalizeHexColor(value: string | undefined): string | null {\n  if (!value) return null;\n  const trimmed = value.trim();\n  if (trimmed.length === 0) return null;\n  if (!HEX_COLOR_PATTERN.test(trimmed)) return null;\n  return trimmed.startsWith('#') ? trimmed : `#${trimmed}`;\n}\n\nexport function tmeMatchBackground(): void {\n  const webApp = getWebApp();\n  if (!webApp) return;\n\n  const primary = normalizeHexColor(webApp.themeParams?.bg_color);\n  const fallback = normalizeHexColor(webApp.themeParams?.secondary_bg_color);\n  const color = primary ?? fallback;\n  if (!color) return;\n\n  try { webApp.setBackgroundColor?.(color); } catch {}\n  try { webApp.setHeaderColor?.('secondary_bg_color'); } catch {}\n\n  try {\n    if (primary) {\n      document.documentElement.style.setProperty('--tg-theme-bg-color', primary);\n    }\n    if (fallback) {\n      document.documentElement.style.setProperty('--tg-theme-secondary-bg-color', fallback);\n    } else if (primary) {\n      document.documentElement.style.setProperty('--tg-theme-secondary-bg-color', primary);\n    }\n    document.documentElement.style.backgroundColor = color;\n    document.body.style.backgroundColor = color;\n  } catch {}\n}\n\nexport function readInitData(): string {\n  return getWebApp()?.initData ?? '';\n}\n\nconst LOCALE_MAP: Record<string, Locale> = { en: 'en', ru: 'ru', uk: 'uk' };\n\nfunction normalizeLocale(raw?: string): Locale | null {\n  if (!raw) return null;\n  const normalized = raw.toLowerCase();\n  if (normalized in LOCALE_MAP) return LOCALE_MAP[normalized];\n  const [base] = normalized.split('-');\n  return LOCALE_MAP[base] ?? null;\n}\n\nexport function readLocale(fallback: Locale = 'en'): Locale {\n  const raw = getWebApp()?.initDataUnsafe?.user?.language_code;\n  return normalizeLocale(raw) ?? fallback;\n}\n", "import { getProgram, HttpError } from '../api/http';\nimport type { Locale } from '../api/types';\nimport { applyLang, t } from '../i18n/i18n';\nimport { renderLegacyProgram, renderProgramDays, fmtDate } from '../ui/render_program';\nimport { readInitData } from '../telegram';\nimport { tmeReady } from '../telegram';\n\ntype Ctx = {\n  root: HTMLElement;\n  content: HTMLElement;\n  dateEl: HTMLElement;\n  titleEl?: HTMLElement | null;\n  button?: HTMLButtonElement | null;\n};\n\ntype Cleanup = () => void;\n\nfunction setBusy(node: HTMLElement, busy: boolean) {\n  if (busy) node.setAttribute('aria-busy', 'true');\n  else node.removeAttribute('aria-busy');\n}\n\nfunction getProgramIdFromURL(): string | null {\n  const u = new URL(location.href);\n  return u.searchParams.get('id');\n}\n\nfunction normalizeDateNode(rawEl: HTMLElement, root: HTMLElement): HTMLElement {\n  let dateEl: HTMLElement = rawEl;\n\n  if (dateEl instanceof HTMLButtonElement) {\n    const span = document.createElement('span');\n    span.id = dateEl.id;\n    span.className = dateEl.className;\n    while (dateEl.firstChild) span.appendChild(dateEl.firstChild);\n    dateEl.replaceWith(span);\n    dateEl = span;\n  }\n\n  dateEl.classList.remove('chip', 'badge', 'pill', 'tag');\n\n  const wrapper = dateEl.closest<HTMLElement>('.chip, .badge, .pill, .tag, button');\n  if (wrapper && wrapper !== dateEl && root.contains(wrapper)) {\n    wrapper.classList.remove('chip', 'badge', 'pill', 'tag');\n    wrapper.style.border = 'none';\n    wrapper.style.borderRadius = '0';\n    wrapper.style.boxShadow = 'none';\n    wrapper.style.background = 'transparent';\n    wrapper.style.padding = '0';\n    if (wrapper.contains(dateEl)) {\n      wrapper.replaceWith(dateEl);\n    }\n  }\n\n  dateEl.setAttribute('role', 'text');\n  dateEl.style.border = 'none';\n  dateEl.style.borderRadius = '0';\n  dateEl.style.boxShadow = 'none';\n  dateEl.style.background = 'transparent';\n  dateEl.style.padding = '0';\n\n  return dateEl;\n}\n\nexport async function mountProgramView(\n  ctx: Ctx,\n  source: 'direct' | 'subscription'\n): Promise<Cleanup> {\n  const { root, content, titleEl } = ctx;\n  let { dateEl } = ctx;\n  const initData: string = readInitData();\n\n  const controller = new AbortController();\n  if (titleEl) {\n    titleEl.textContent = t('page.program');\n  }\n  setBusy(content, true);\n\n  dateEl = normalizeDateNode(dateEl, root);\n\n  dateEl.hidden = false;\n  dateEl.textContent = '';\n\n  try {\n    const programId = getProgramIdFromURL();\n    const load = await getProgram(programId ?? '', { initData, source, signal: controller.signal });\n\n    const appliedLocale: Locale = await applyLang(load.locale);\n    if (titleEl) {\n      titleEl.textContent = t('page.program');\n    }\n    const locale: Locale = appliedLocale;\n\n    content.innerHTML = '';\n\n    if (load.kind === 'structured') {\n      if (load.program.created_at) {\n        dateEl.textContent = t('program.created', {\n          date: fmtDate(load.program.created_at, locale),\n        });\n      }\n      const rendered = renderProgramDays(load.program);\n      content.appendChild(rendered.fragment);\n    } else {\n      if (load.createdAt) {\n        dateEl.textContent = t('program.created', {\n          date: fmtDate(load.createdAt, locale),\n        });\n      }\n      const rendered = renderLegacyProgram(load.programText, locale);\n      content.appendChild(rendered.fragment);\n    }\n\n    tmeReady();\n  } catch (e) {\n    let key = 'unexpected_error';\n    if (e instanceof HttpError) key = e.message;\n    content.innerHTML = `<div class=\"notice\">${t(key as any)}</div>`;\n  } finally {\n    setBusy(content, false);\n  }\n\n  return () => {\n    controller.abort();\n  };\n}\n", "import { applyLang, t } from '../i18n/i18n';\nimport type { HistoryResp, Locale } from '../api/types';\nimport { goToProgram } from '../router';\nimport { readInitData, readLocale } from '../telegram';\n\nconst content = document.getElementById('content') as HTMLElement | null;\nconst dateChip = document.getElementById('program-date') as HTMLDivElement | null;\n\nasync function getHistory(locale: Locale): Promise<HistoryResp> {\n  const headers: Record<string, string> = {};\n  const initData = readInitData();\n  if (initData) headers['X-Telegram-InitData'] = initData;\n  const url = new URL('api/programs/', window.location.href);\n  url.searchParams.set('locale', locale);\n  const resp = await fetch(url.toString(), { headers });\n  if (!resp.ok) throw new Error('unexpected_error');\n  return (await resp.json()) as HistoryResp;\n}\n\nexport async function renderHistoryView(titleEl?: HTMLElement | null): Promise<void> {\n  if (!content) return;\n  content.setAttribute('aria-busy', 'true');\n  content.innerHTML = '';\n\n  if (dateChip) dateChip.hidden = true;\n\n  if (titleEl) {\n    titleEl.textContent = t('page.history');\n  }\n\n  const wrap = document.createElement('div');\n  wrap.className = 'week';\n  const h2 = document.createElement('h2');\n  h2.textContent = t('history');\n  wrap.appendChild(h2);\n\n  const ul = document.createElement('ul');\n  ul.className = 'history-list';\n  wrap.appendChild(ul);\n  content.appendChild(wrap);\n\n  try {\n    const requestLocale = readLocale();\n    const data = await getHistory(requestLocale);\n    const lang = await applyLang(data.language ?? requestLocale);\n\n    if (titleEl) {\n      titleEl.textContent = t('page.history');\n    }\n\n    const resolveSource = (): 'direct' | 'subscription' => {\n      const raw = new URL(window.location.href).searchParams.get('source');\n      return raw === 'subscription' ? 'subscription' : 'direct';\n    };\n\n    h2.textContent = t('history');\n\n    const items = data.programs ?? [];\n    if (items.length === 0) {\n      const p = document.createElement('p');\n      p.className = 'history-empty';\n      p.textContent = t('no_programs');\n      content.appendChild(p);\n    } else {\n      items.forEach((it) => {\n        const li = document.createElement('li');\n        const a = document.createElement('a');\n        a.href = '#';\n        a.textContent = new Date(it.created_at * 1000).toLocaleString(lang);\n        a.onclick = (e) => {\n          e.preventDefault();\n          const url = new URL(window.location.href);\n          url.searchParams.set('id', String(it.id));\n          history.replaceState({}, '', url.toString());\n          goToProgram('direct');\n        };\n        li.appendChild(a);\n        ul.appendChild(li);\n      });\n    }\n  } catch {\n    const err = document.createElement('div');\n    err.className = 'error-block';\n    err.textContent = t('unexpected_error');\n    content.appendChild(err);\n  } finally {\n    content.removeAttribute('aria-busy');\n  }\n}\n", "import { applyLang, t } from './i18n/i18n';\nimport { initRouter, onRouteChange, Route, goToHistory, goToProgram } from './router';\nimport { mountProgramView } from './views/program_view';\nimport { renderHistoryView } from './views/history';\nimport { tmeExpand, tmeMatchBackground } from './telegram';\n\ntype CleanupFn = () => void;\n\nfunction ensureHistoryButton(): HTMLButtonElement | null {\n  const controls = document.getElementById('controls') as HTMLDivElement | null;\n  if (!controls) return null;\n\n  controls.innerHTML = '';\n  const footer = document.createElement('div');\n  footer.className = 'history-footer';\n\n  const button = document.createElement('button');\n  button.type = 'button';\n  button.id = 'history-button';\n  button.className = 'primary-button';\n  button.disabled = true;\n  footer.appendChild(button);\n\n  controls.appendChild(footer);\n  return button;\n}\n\nfunction resolveSourceFromLocation(): 'direct' | 'subscription' {\n  try {\n    const u = new URL(window.location.href);\n    const src = (u.searchParams.get('source') || '').toLowerCase();\n    return src === 'subscription' ? 'subscription' : 'direct';\n  } catch {\n    return 'direct';\n  }\n}\n\nasync function handleRoute(\n  route: Route,\n  ctx: {\n    root: HTMLElement;\n    content: HTMLElement;\n    dateEl: HTMLElement;\n    historyButton: HTMLButtonElement | null;\n    titleEl: HTMLElement | null;\n  },\n  cleanup: { current?: CleanupFn }\n): Promise<void> {\n  const { historyButton, titleEl } = ctx;\n  if (cleanup.current) {\n    try { cleanup.current(); } catch {}\n  }\n  cleanup.current = undefined;\n\n  if (route.kind === 'history') {\n    const source = resolveSourceFromLocation();\n    if (historyButton) {\n      historyButton.disabled = true;\n    }\n    await renderHistoryView(titleEl ?? undefined);\n    if (historyButton) {\n      historyButton.textContent = t('back');\n      historyButton.disabled = false;\n      historyButton.onclick = () => goToProgram(source);\n    }\n    return;\n  }\n\n  if (historyButton) {\n    historyButton.disabled = true;\n  }\n\n  const dispose = await mountProgramView(\n    {\n      root: ctx.root,\n      content: ctx.content,\n      dateEl: ctx.dateEl,\n      button: historyButton,\n      titleEl,\n    },\n    route.source\n  );\n  cleanup.current = dispose;\n\n  if (historyButton) {\n    historyButton.textContent = t('program.view_history');\n    historyButton.disabled = false;\n    historyButton.onclick = () => goToHistory();\n  }\n}\n\nasync function bootstrap(): Promise<void> {\n  const root = document.getElementById('app') as HTMLElement | null;\n  const content = document.getElementById('content') as HTMLElement | null;\n  const dateEl = document.getElementById('program-date') as HTMLElement | null;\n  const titleEl = document.getElementById('page-title') as HTMLElement | null;\n  if (!root || !content || !dateEl) return;\n\n  try { await applyLang(); } catch {}\n\n  tmeExpand();\n  tmeMatchBackground();\n\n  const historyButton = ensureHistoryButton();\n  const cleanup: { current?: CleanupFn } = {};\n\n  onRouteChange((route) => {\n    void handleRoute(route, { root, content, dateEl, historyButton, titleEl }, cleanup);\n  });\n\n  initRouter();\n}\n\nbootstrap();\n"],
  "mappings": "0cACO,IAAMA,EAAqC,CAAE,IAAK,KAAM,GAAI,KAAM,GAAI,KAAM,GAAI,KAAM,GAAI,IAAK,EAEtG,SAASC,GAAgBC,EAAwB,CAHjD,IAAAC,EAIE,GAAI,CAACD,EAAK,MAAO,KACjB,IAAME,EAAaF,EAAI,YAAY,EAC7BG,EAASL,EAASI,CAAU,EAClC,GAAIC,EAAQ,OAAOA,EACnB,GAAM,CAACC,CAAI,EAAIF,EAAW,MAAM,GAAG,EACnC,OAAOD,EAAAH,EAASM,CAAI,IAAb,KAAAH,EAAkB,IAC3B,CAEO,IAAMI,EAAa,CACxB,QAAS,UACT,QAAS,UACT,SAAU,KACV,oBAAqB,kCACrB,aAAc,eACd,UAAW,YACX,aAAc,eACd,iBAAkB,mBAClB,YAAa,oBACb,YAAa,eACb,YAAa,eACb,QAAS,wBACT,KAAM,OACN,mBAAoB,gCACpB,gBAAiB,kBACjB,kBAAmB,kBACnB,uBAAwB,eACxB,eAAgB,WAChB,cAAe,yBACf,mBAAoB,WACpB,MAAO,QACP,eAAgB,UAChB,eAAgB,SAClB,EAMIC,EAAqB,CAAC,EAE1B,eAAeC,GAAaC,EAA+B,CACzD,IAAMJ,EAAQ,OAAe,mBAAqB,WAClD,GAAI,CACF,IAAMK,EAAM,MAAM,MAAM,GAAGL,CAAI,QAAQI,CAAI,QAAS,CAAE,MAAO,UAAW,CAAC,EACzEF,EAAWG,EAAI,GAAO,MAAMA,EAAI,KAAK,EAAkBC,EAAA,GAAKL,EAC9D,OAAQM,EAAA,CACNL,EAAWI,EAAA,GAAKL,EAClB,CACF,CAEA,SAASO,GAAYC,EAAkBC,EAA6B,CAClE,OAAKA,EACED,EAAS,QAAQ,aAAc,CAACE,EAAGC,IAAgB,CACxD,IAAMC,EAAQH,EAAKE,CAAG,EACtB,OAA8BC,GAAU,KAAO,GAAK,OAAOA,CAAK,CAClE,CAAC,EAJiBJ,CAKpB,CAEO,SAASK,EAA4BF,EAAQF,EAA6B,CA9DjF,IAAAb,EA+DE,IAAMY,GAAWZ,EAAAK,EAASU,CAAG,IAAZ,KAAAf,EAAiBI,EAAWW,CAAG,EAChD,OAAOJ,GAAYC,EAAUC,CAAI,CACnC,CAIA,eAAsBK,EAAUnB,EAAiC,CArEjE,IAAAC,EAAAmB,EAAAC,EAsEE,IAAIC,EAAWtB,EACf,GAAI,CACF,IAAMuB,GAAMtB,EAAA,OAAe,WAAf,YAAAA,EAAyB,OACjC,CAACqB,KAAYD,GAAAD,EAAAG,GAAA,YAAAA,EAAI,iBAAJ,YAAAH,EAAoB,OAApB,MAAAC,EAA0B,iBACzCC,EAAWC,EAAG,eAAe,KAAK,cAEtC,OAAQZ,EAAA,CACR,CAEA,IAAMH,EAAOT,GAAgBuB,CAAQ,EACrC,gBAAS,gBAAgB,KAAOd,EAChC,MAAMD,GAAaC,CAAI,EAChBA,CACT,CC9EA,IAAIgB,EAAqB,CAAC,EAEnB,SAASC,GAAWC,EAAsB,CAC/C,IAAMC,EAAM,IAAI,IAAID,EAAI,IAAI,EAE5B,OADcC,EAAI,aAAa,IAAI,MAAM,GAAK,WAAW,YAAY,IACxD,UAAkB,CAAE,KAAM,SAAU,EAE1C,CAAE,KAAM,UAAW,OADVA,EAAI,aAAa,IAAI,QAAQ,GAAK,QACjB,CACnC,CAEO,SAASC,GAAoB,CAClC,IAAMD,EAAM,IAAI,IAAI,SAAS,IAAI,EACjCA,EAAI,aAAa,IAAI,OAAQ,SAAS,EACtC,QAAQ,UAAU,CAAC,EAAG,GAAIA,EAAI,SAAS,CAAC,EACxCE,EAAK,CACP,CAEO,SAASC,EAAYC,EAAoC,SAAgB,CAC9E,IAAMJ,EAAM,IAAI,IAAI,SAAS,IAAI,EACjCA,EAAI,aAAa,IAAI,OAAQ,SAAS,EACtCA,EAAI,aAAa,IAAI,SAAUI,CAAM,EACrC,QAAQ,UAAU,CAAC,EAAG,GAAIJ,EAAI,SAAS,CAAC,EACxCE,EAAK,CACP,CAEA,SAASA,GAAO,CACd,IAAMG,EAAIP,GAAW,QAAQ,EAC7BD,EAAU,QAASS,GAAOA,EAAGD,CAAC,CAAC,CACjC,CAEO,SAASE,GAAmB,CACjCL,EAAK,CACP,CAEO,SAASM,EAAcF,EAAiB,CAC7CT,EAAU,KAAKS,CAAE,CACnB,CAEA,OAAO,iBAAiB,WAAY,IAAMJ,EAAK,CAAC,ECzChD,IAAMO,GAAmC,CAAC,KAAM,KAAM,IAAI,EACpDC,EAAyC,CAAE,GAAI,IAAK,EAE1D,SAASC,EAAgBC,EAAgCC,EAA0B,CACjF,GAAI,CAACD,EAAK,OAAOC,EACjB,IAAMC,EAAQF,EAAI,YAAY,EAC9B,OAAIE,KAASJ,EACJA,EAAeI,CAAK,EAExBL,GAAoC,SAASK,CAAK,EAC9CA,EAEFD,CACT,CAEO,IAAME,EAAN,cAAwB,KAAM,CAEnC,YAAYC,EAAgBC,EAAiB,CAC3C,MAAMA,CAAO,EACb,KAAK,OAASD,CAChB,CACF,EAEO,SAASE,GAAgBF,EAAwB,CACtD,OAAQA,EAAQ,CACd,IAAK,KACL,IAAK,KACH,MAAO,eACT,IAAK,KACH,MAAO,YACT,IAAK,KACH,MAAO,eACT,QACE,MAAO,kBACX,CACF,CAMA,eAAsBG,GAAWC,EAAaC,EAAuB,CAAC,EAAe,CACnF,IAAMC,EAAO,MAAM,MAAMF,EAAKC,CAAO,EACrC,GAAI,CAACC,EAAK,GACR,MAAM,IAAIP,EAAUO,EAAK,OAAQJ,GAAgBI,EAAK,MAAM,CAAC,EAE/D,OAAQ,MAAMA,EAAK,KAAK,CAC1B,CAQA,SAASC,GAAoBC,EAAsD,CACjF,OAAO,OAAOA,GAAS,UAAYA,IAAS,MAAQ,SAAUA,CAChE,CAWA,eAAsBC,EACpBC,EACAC,EACAC,EACwB,CA1E1B,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EA2EE,IAAIC,EAAiB,KACjBC,EAEJ,GAAI,OAAOT,GAAM,SACfQ,EAASR,EACTS,EAAOR,MACF,CACL,GAAI,CACF,IAAMS,GAAMR,EAAA,OAAe,WAAf,YAAAA,EAAyB,OAC/BS,GAAKP,GAAAD,EAAAO,GAAA,YAAAA,EAAI,iBAAJ,YAAAP,EAAoB,OAApB,YAAAC,EAA0B,cACjCO,GAAO,CAAC,KAAM,KAAM,IAAI,EAAe,SAASA,CAAE,IACpDH,EAASG,EAEb,OAAQC,EAAA,CACR,CACAH,EAAOT,CACT,CAEA,IAAMa,EAAS,IAAI,gBAAgB,CAAE,OAAAL,EAAQ,OAAQC,EAAK,MAAO,CAAC,EAC9DV,GACFc,EAAO,IAAI,aAAcd,CAAS,EAEpC,IAAMN,EAAM,IAAI,IAAI,eAAgB,OAAO,SAAS,IAAI,EACxDoB,EAAO,QAAQ,CAACC,EAAOC,IAAQ,CAC7BtB,EAAI,aAAa,IAAIsB,EAAKD,CAAK,CACjC,CAAC,EACD,IAAME,EAAkC,CAAC,EACrCP,EAAK,WAAUO,EAAQ,qBAAqB,EAAIP,EAAK,UAEzD,IAAMZ,EAAO,MAAML,GAAqBC,EAAI,SAAS,EAAG,CAAE,QAAAuB,EAAS,OAAQP,EAAK,MAAO,CAAC,EAElFQ,EAAgBpB,EAAsC,SACtDqB,EAAiBlC,EAAgBiC,GAAA,KAAAA,EAAiBpB,EAA6B,OAAQW,CAAM,EAEnG,GAAIZ,GAAoBC,CAAI,EAAG,CAC7B,IAAMsB,EAAgBnC,EAAgBa,EAAK,OAAQqB,CAAc,EACjE,MAAO,CACL,KAAM,aACN,QAASE,EAAAC,EAAA,GACJxB,GADI,CAEP,OAAQsB,EACR,YAAYd,EAAAR,EAAK,aAAL,KAAAQ,EAAmB,KAC/B,OAAOC,EAAAT,EAAK,QAAL,KAAAS,EAAc,CAAC,EACtB,MAAMC,EAAAV,EAAK,OAAL,KAAAU,EAAa,CAAC,CACtB,GACA,OAAQY,CACV,CACF,CAEA,IAAMG,EAAezB,EAAK,WACtB0B,EAA2B,KAC/B,OAAI,OAAOD,GAAiB,SAC1BC,EAAY,IAAI,KAAKD,EAAe,GAAI,EAAE,YAAY,EAC7C,OAAOA,GAAiB,WACjCC,EAAYD,GAGP,CAAE,KAAM,SAAU,YAAazB,EAAK,QAAS,OAAQqB,EAAgB,UAAAK,CAAU,CACxF,CC9HO,SAASC,EAAQC,EAAwBC,EAAwB,CACtE,IAAMC,EAAO,OAAOF,GAAU,SAAW,IAAI,KAAKA,EAAQ,GAAI,EAAI,IAAI,KAAKA,CAAK,EAChF,OAAI,OAAO,MAAME,EAAK,QAAQ,CAAC,EACtB,OAAOF,CAAK,EAEd,IAAI,KAAK,eAAeC,EAAQ,CACrC,IAAK,UACL,MAAO,QACP,KAAM,SACR,CAAC,EAAE,OAAOC,CAAI,CAChB,CAEA,SAASC,GAAYC,EAA0B,CAC7C,OAAIA,EAAQ,OAASA,EAAQ,MAAM,OAAS,EAAUA,EAAQ,MACvD,CAAC,CAAE,MAAO,EAAG,KAAMA,EAAQ,IAAK,CAAC,CAC1C,CAOA,SAASC,GAAwBC,EAAmC,CAClE,IAAMC,EAAUD,EAAK,KAAK,EACpBE,EAAgBD,EAAQ,QAAQ,6CAA8C,EAAE,EAChFE,EAAOD,EAAc,OAAS,EAAIA,EAAgBD,EAElDG,EAAeC,EAA4BF,CAAI,EACrD,GAAIC,EAAa,aAAa,OAAS,EACrC,MAAO,CAAE,KAAMA,EAAa,MAAO,QAASA,EAAa,aAAa,KAAK,IAAI,CAAE,EAGnF,IAAME,EAA2E,CAC/E,CAAE,QAAS,IAAK,OAAQ,CAAE,EAC1B,CAAE,QAAS,YAAa,OAAQ,CAAE,CACpC,EAEA,OAAW,CAAE,QAAAC,EAAS,OAAAC,CAAO,IAAKF,EAAY,CAC5C,IAAMG,EAAQN,EAAK,MAAMI,CAAO,EAChC,GAAI,CAACE,GAASA,EAAM,QAAU,OAAW,SACzC,IAAMC,EAAaD,EAAM,MACnBE,EAAOR,EAAK,MAAM,EAAGO,CAAU,EAAE,KAAK,EACtCE,EAAUT,EAAK,MAAMO,EAAaF,CAAM,EAAE,KAAK,EACrD,GAAIG,EAAK,OAAS,GAAKC,EAAQ,OAAS,EACtC,MAAO,CAAE,KAAAD,EAAM,QAAAC,CAAQ,CAE3B,CAEA,MAAO,CAAE,KAAMR,EAAa,MAAO,QAAS,IAAK,CACnD,CAOA,IAAMS,GAAyB,oCACzBC,GAAsB,iBACtBC,GAA6B,kBAEnC,SAASC,EAAiBtB,EAAuB,CAC/C,OAAOA,EAAM,QAAQqB,GAA4B,GAAG,EAAE,QAAQ,UAAW,GAAG,EAAE,KAAK,CACrF,CAEA,SAASE,EAAavB,EAAwB,CAC5C,IAAMwB,EAAaxB,EAAM,KAAK,EAC9B,OAAIwB,EAAW,SAAW,EACjB,GAGJJ,GAAoB,KAAKI,CAAU,EAIxBA,EAAW,QAAQ,kBAAmB,EAAE,EAAE,KAAK,EAChD,SAAW,EAJjB,EAKX,CAEA,SAASb,EAA4BM,EAAoC,CArFzE,IAAAQ,EAsFE,IAAMC,EAAMJ,EAAiBL,EAAK,KAAK,CAAC,EACxC,GAAIS,EAAI,SAAW,EACjB,MAAO,CAAE,MAAO,GAAI,aAAc,CAAC,CAAE,EAQvC,IAAMC,EALaD,EAChB,QAAQ,aAAc,KAAK,EAC3B,QAAQ,cAAe,KAAK,EAC5B,QAAQ,SAAU,GAAG,EAGrB,MAAM,GAAG,EACT,IAAKE,GAAYN,EAAiBM,CAAO,CAAC,EAC1C,OAAQA,GAAYA,EAAQ,OAAS,CAAC,EAEnCC,GAAUJ,EAAAE,EAAS,MAAM,IAAf,KAAAF,EAAoBC,EAC9BI,EAAeD,EAAQ,QAAQV,GAAwB,EAAE,EAAE,KAAK,EAChEY,EAAQD,EAAa,OAAS,EAAIA,EAAeD,EAEjDG,EAAeL,EAAS,OAAQC,GAAY,CAACL,EAAaK,CAAO,CAAC,EAClEK,EAAgB,MAAM,KAAK,IAAI,IAAID,CAAY,CAAC,EACtD,MAAO,CAAE,MAAAD,EAAO,aAAcE,CAAc,CAC9C,CAEA,SAASC,GAAalC,EAAiD,CACrE,GAAI,CAACA,EAAO,OAAO,KACnB,IAAMO,EAAUe,EAAiBtB,CAAK,EAEtC,OADIO,EAAQ,SAAW,GACnBgB,EAAahB,CAAO,EAAU,KAC3BA,CACT,CAEA,SAAS4B,GAAmBC,EAAcC,EAA8B,CACtE,IAAMC,EAAK,SAAS,cAAc,IAAI,EACtCA,EAAG,UAAY,mBAEf,IAAMpB,EAAU,SAAS,cAAc,SAAS,EAChDA,EAAQ,UAAY,2BAEpB,IAAMqB,EAAU,SAAS,cAAc,SAAS,EAChDA,EAAQ,UAAY,2BACpB,IAAM7B,EAAeC,EAA4ByB,EAAG,IAAI,EAClDL,EAAQrB,EAAa,MAAM,OAAS,EAAIA,EAAa,MAAQ0B,EAAG,KAEhEI,EAAa,SAAS,cAAc,MAAM,EAChDA,EAAW,UAAY,yBACvBA,EAAW,YAAc,OAAOH,EAAQ,CAAC,EAEzC,IAAMI,EAAa,SAAS,cAAc,MAAM,EAChDA,EAAW,UAAY,yBACvBA,EAAW,YAAcV,EAEzBQ,EAAQ,YAAYC,CAAU,EAC9BD,EAAQ,YAAYE,CAAU,EAC9BvB,EAAQ,YAAYqB,CAAO,EAE3B,IAAMG,EAAsB,CAAC,GAAGhC,EAAa,YAAY,EACrD0B,EAAG,OAAS,MAAQA,EAAG,OAAS,QAAaA,EAAG,OAAS,IAC3DM,EAAU,KAAK,SAAS,OAAON,EAAG,IAAI,CAAC,EAAE,EAEvCA,EAAG,OAAS,MAAQA,EAAG,OAAS,QAAaA,EAAG,OAAS,IAC3DM,EAAU,KAAK,SAAS,OAAON,EAAG,IAAI,CAAC,EAAE,EAEvCA,EAAG,QAAQM,EAAU,KAAK,WAAWN,EAAG,OAAO,KAAK,IAAIA,EAAG,OAAO,IAAI,EAAE,EACxEA,EAAG,WAAWM,EAAU,KAAK,cAAcN,EAAG,SAAS,EAAE,EAE7D,IAAMO,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,2BAEpB,IAAMC,EAAOV,GAAaE,EAAG,KAAK,EAE5BS,EAAiBH,EAAU,OAAQI,GAAS,CAACvB,EAAauB,CAAI,CAAC,EAErE,GAAID,EAAe,OAAS,EAAG,CAC7B,IAAME,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAY,wBACjBA,EAAK,YAAcF,EAAe,KAAK,IAAI,EAC3CF,EAAQ,YAAYI,CAAI,CAC1B,CAEA,GAAIH,EAAM,CACR,IAAMI,EAAQ,SAAS,cAAc,GAAG,EACxCA,EAAM,UAAY,yBAClBA,EAAM,YAAcJ,EACpBD,EAAQ,YAAYK,CAAK,CAC3B,CAEA,OAAIL,EAAQ,kBAAoB,GAC9BzB,EAAQ,YAAYyB,CAAO,EAC3BL,EAAG,YAAYpB,CAAO,EACfoB,IAGTpB,EAAQ,UAAU,IAAI,iCAAiC,EACvDqB,EAAQ,UAAU,IAAI,iCAAiC,EACvDD,EAAG,YAAYpB,CAAO,EACfoB,EACT,CAEA,SAASW,EAAUC,EAAuB,CAzL1C,IAAAzB,EA0LE,IAAMP,EAAU,SAAS,cAAc,SAAS,EAChDA,EAAQ,UAAY,cAEpB,IAAMqB,EAAU,SAAS,cAAc,SAAS,EAGhD,GAFAA,EAAQ,UAAY,sBAEhBW,EAAI,OAAS,OACfX,EAAQ,YAAcY,EAAE,kBAAkB,EAC1CjC,EAAQ,UAAU,IAAI,kBAAkB,MACnC,CACL,IAAMkC,GAAc3B,EAAAyB,EAAI,QAAJ,YAAAzB,EAAW,OAC/B,GAAI2B,GAAeA,EAAY,OAAS,EACtCb,EAAQ,YAAca,MACjB,CACL,IAAMC,EAAWF,EAAE,cAAe,CAAE,EAAGD,EAAI,MAAO,MAAO,EAAG,CAAC,EAAE,QAAQ,cAAe,EAAE,EACxFX,EAAQ,YAAcc,CACxB,CACF,CAIA,GAFAnC,EAAQ,YAAYqB,CAAO,EAEvBW,EAAI,OAAS,WAAaA,EAAI,UAAW,CAC3C,IAAMI,EAAO,SAAS,cAAc,IAAI,EACxCA,EAAK,UAAY,mBACjBJ,EAAI,UAAU,QAAQ,CAACd,EAAImB,IAAQ,CACjCD,EAAK,YAAYnB,GAAmBC,EAAImB,CAAG,CAAC,CAC9C,CAAC,EACDrC,EAAQ,YAAYoC,CAAI,CAC1B,CAEA,OAAOpC,CACT,CAEO,SAASsC,EAAkBpD,EAAmC,CACnE,IAAMqD,EAAW,SAAS,uBAAuB,EAEjD,OADctD,GAAYC,CAAO,EAC3B,QAASsD,GAAS,CACtB,IAAMC,EAAO,SAAS,cAAc,SAAS,EAC7CA,EAAK,UAAY,OAEjB,IAAMC,EAAK,SAAS,cAAc,IAAI,EACtCA,EAAG,YAAcT,EAAE,eAAgB,CAAE,EAAGO,EAAK,KAAM,CAAC,EACpDC,EAAK,YAAYC,CAAE,EAEnBF,EAAK,KAAK,QAASR,GAAQ,CACzBS,EAAK,YAAYV,EAAUC,CAAG,CAAC,CACjC,CAAC,EAEDO,EAAS,YAAYE,CAAI,CAC3B,CAAC,EACM,CAAE,SAAAF,CAAS,CACpB,CAEO,SAASI,EAAoBC,EAAcC,EAAkC,CAClF,IAAMN,EAAW,SAAS,uBAAuB,EAGjD,OAFcK,EAAK,MAAM,SAAS,EAAE,OAAQE,GAAMA,EAAE,KAAK,EAAE,OAAS,CAAC,EAE/D,QAAQ,CAACC,EAAOV,IAAQ,CAC5B,IAAMW,EAAQD,EAAM,MAAM,IAAI,EAAE,IAAKE,GAAMA,EAAE,KAAK,CAAC,EAAE,OAAO,OAAO,EACnE,GAAID,EAAM,SAAW,EAAG,OAExB,IAAME,EAAYF,EAAM,MAAM,CAAC,EAAE,IAAI,CAAC5D,EAAM+D,IAAM,CAChD,IAAMC,EAASjE,GAAwBC,CAAI,EAC3C,MAAO,CACL,GAAI,MAAMiD,EAAM,CAAC,IAAIc,EAAI,CAAC,GAC1B,KAAMC,EAAO,KACb,KAAM,KACN,KAAM,KACN,OAAQ,KACR,UAAW,KACX,MAAOA,EAAO,OAChB,CACF,CAAC,EAEKC,EAAU,CACd,GAAI,UAAUhB,EAAM,CAAC,GACrB,MAAOA,EAAM,EACb,KAAM,UACN,MAAOW,EAAM,CAAC,EACd,UAAAE,CACF,EACAX,EAAS,YAAYR,EAAUsB,CAAO,CAAC,CACzC,CAAC,EAEM,CAAE,SAAAd,CAAS,CACpB,CCvPA,SAASe,GAAmC,CAxB5C,IAAAC,EAAAC,EAyBE,GAAI,CAEF,OAAOA,GAAAD,EADK,OACD,WAAJ,YAAAA,EAAc,SAAd,KAAAC,EAAwB,IACjC,OAAQC,EAAA,CACN,OAAO,IACT,CACF,CAEO,SAASC,GAAiB,CAjCjC,IAAAH,EAAAC,EAkCE,GAAI,EAAEA,GAAAD,EAAAD,EAAU,IAAV,YAAAC,EAAa,QAAb,MAAAC,EAAA,KAAAD,EAAwB,OAAQE,EAAA,CAAC,CACzC,CAEO,SAASE,GAAkB,CArClC,IAAAJ,EAAAC,EAsCE,GAAI,EAAEA,GAAAD,EAAAD,EAAU,IAAV,YAAAC,EAAa,SAAb,MAAAC,EAAA,KAAAD,EAAyB,OAAQE,EAAA,CAAC,CAC1C,CAEA,IAAMG,GAAoB,+CAE1B,SAASC,EAAkBC,EAA0C,CACnE,GAAI,CAACA,EAAO,OAAO,KACnB,IAAMC,EAAUD,EAAM,KAAK,EAE3B,OADIC,EAAQ,SAAW,GACnB,CAACH,GAAkB,KAAKG,CAAO,EAAU,KACtCA,EAAQ,WAAW,GAAG,EAAIA,EAAU,IAAIA,CAAO,EACxD,CAEO,SAASC,IAA2B,CAnD3C,IAAAT,EAAAC,EAAAS,EAAAC,EAoDE,IAAMC,EAASb,EAAU,EACzB,GAAI,CAACa,EAAQ,OAEb,IAAMC,EAAUP,GAAkBN,EAAAY,EAAO,cAAP,YAAAZ,EAAoB,QAAQ,EACxDc,EAAWR,GAAkBL,EAAAW,EAAO,cAAP,YAAAX,EAAoB,kBAAkB,EACnEc,EAAQF,GAAA,KAAAA,EAAWC,EACzB,GAAKC,EAEL,IAAI,EAAEL,EAAAE,EAAO,qBAAP,MAAAF,EAAA,KAAAE,EAA4BG,EAAQ,OAAQb,EAAA,CAAC,CACnD,GAAI,EAAES,EAAAC,EAAO,iBAAP,MAAAD,EAAA,KAAAC,EAAwB,qBAAuB,OAAQV,EAAA,CAAC,CAE9D,GAAI,CACEW,GACF,SAAS,gBAAgB,MAAM,YAAY,sBAAuBA,CAAO,EAEvEC,EACF,SAAS,gBAAgB,MAAM,YAAY,gCAAiCA,CAAQ,EAC3ED,GACT,SAAS,gBAAgB,MAAM,YAAY,gCAAiCA,CAAO,EAErF,SAAS,gBAAgB,MAAM,gBAAkBE,EACjD,SAAS,KAAK,MAAM,gBAAkBA,CACxC,OAAQb,EAAA,CAAC,EACX,CAEO,SAASc,GAAuB,CA7EvC,IAAAhB,EAAAC,EA8EE,OAAOA,GAAAD,EAAAD,EAAU,IAAV,YAAAC,EAAa,WAAb,KAAAC,EAAyB,EAClC,CAEA,IAAMgB,EAAqC,CAAE,GAAI,KAAM,GAAI,KAAM,GAAI,IAAK,EAE1E,SAASC,GAAgBC,EAA6B,CAnFtD,IAAAnB,EAoFE,GAAI,CAACmB,EAAK,OAAO,KACjB,IAAMC,EAAaD,EAAI,YAAY,EACnC,GAAIC,KAAcH,EAAY,OAAOA,EAAWG,CAAU,EAC1D,GAAM,CAACC,CAAI,EAAID,EAAW,MAAM,GAAG,EACnC,OAAOpB,EAAAiB,EAAWI,CAAI,IAAf,KAAArB,EAAoB,IAC7B,CAEO,SAASsB,GAAWR,EAAmB,KAAc,CA3F5D,IAAAd,EAAAC,EAAAS,EAAAC,EA4FE,IAAMQ,GAAMT,GAAAT,GAAAD,EAAAD,EAAU,IAAV,YAAAC,EAAa,iBAAb,YAAAC,EAA6B,OAA7B,YAAAS,EAAmC,cAC/C,OAAOC,EAAAO,GAAgBC,CAAG,IAAnB,KAAAR,EAAwBG,CACjC,CC7EA,SAASS,GAAQC,EAAmBC,EAAe,CAC7CA,EAAMD,EAAK,aAAa,YAAa,MAAM,EAC1CA,EAAK,gBAAgB,WAAW,CACvC,CAEA,SAASE,IAAqC,CAE5C,OADU,IAAI,IAAI,SAAS,IAAI,EACtB,aAAa,IAAI,IAAI,CAChC,CAEA,SAASC,GAAkBC,EAAoBC,EAAgC,CAC7E,IAAIC,EAAsBF,EAE1B,GAAIE,aAAkB,kBAAmB,CACvC,IAAMC,EAAO,SAAS,cAAc,MAAM,EAG1C,IAFAA,EAAK,GAAKD,EAAO,GACjBC,EAAK,UAAYD,EAAO,UACjBA,EAAO,YAAYC,EAAK,YAAYD,EAAO,UAAU,EAC5DA,EAAO,YAAYC,CAAI,EACvBD,EAASC,CACX,CAEAD,EAAO,UAAU,OAAO,OAAQ,QAAS,OAAQ,KAAK,EAEtD,IAAME,EAAUF,EAAO,QAAqB,oCAAoC,EAChF,OAAIE,GAAWA,IAAYF,GAAUD,EAAK,SAASG,CAAO,IACxDA,EAAQ,UAAU,OAAO,OAAQ,QAAS,OAAQ,KAAK,EACvDA,EAAQ,MAAM,OAAS,OACvBA,EAAQ,MAAM,aAAe,IAC7BA,EAAQ,MAAM,UAAY,OAC1BA,EAAQ,MAAM,WAAa,cAC3BA,EAAQ,MAAM,QAAU,IACpBA,EAAQ,SAASF,CAAM,GACzBE,EAAQ,YAAYF,CAAM,GAI9BA,EAAO,aAAa,OAAQ,MAAM,EAClCA,EAAO,MAAM,OAAS,OACtBA,EAAO,MAAM,aAAe,IAC5BA,EAAO,MAAM,UAAY,OACzBA,EAAO,MAAM,WAAa,cAC1BA,EAAO,MAAM,QAAU,IAEhBA,CACT,CAEA,eAAsBG,GACpBC,EACAC,EACkB,CAClB,GAAM,CAAE,KAAAN,EAAM,QAAAO,EAAS,QAAAC,CAAQ,EAAIH,EAC/B,CAAE,OAAAJ,CAAO,EAAII,EACXI,EAAmBC,EAAa,EAEhCC,EAAa,IAAI,gBACnBH,IACFA,EAAQ,YAAcI,EAAE,cAAc,GAExClB,GAAQa,EAAS,EAAI,EAErBN,EAASH,GAAkBG,EAAQD,CAAI,EAEvCC,EAAO,OAAS,GAChBA,EAAO,YAAc,GAErB,GAAI,CACF,IAAMY,EAAYhB,GAAoB,EAChCiB,EAAO,MAAMC,EAAWF,GAAA,KAAAA,EAAa,GAAI,CAAE,SAAAJ,EAAU,OAAAH,EAAQ,OAAQK,EAAW,MAAO,CAAC,EAExFK,EAAwB,MAAMC,EAAUH,EAAK,MAAM,EACrDN,IACFA,EAAQ,YAAcI,EAAE,cAAc,GAExC,IAAMM,EAAiBF,EAIvB,GAFAT,EAAQ,UAAY,GAEhBO,EAAK,OAAS,aAAc,CAC1BA,EAAK,QAAQ,aACfb,EAAO,YAAcW,EAAE,kBAAmB,CACxC,KAAMO,EAAQL,EAAK,QAAQ,WAAYI,CAAM,CAC/C,CAAC,GAEH,IAAME,EAAWC,EAAkBP,EAAK,OAAO,EAC/CP,EAAQ,YAAYa,EAAS,QAAQ,CACvC,KAAO,CACDN,EAAK,YACPb,EAAO,YAAcW,EAAE,kBAAmB,CACxC,KAAMO,EAAQL,EAAK,UAAWI,CAAM,CACtC,CAAC,GAEH,IAAME,EAAWE,EAAoBR,EAAK,YAAaI,CAAM,EAC7DX,EAAQ,YAAYa,EAAS,QAAQ,CACvC,CAEAG,EAAS,CACX,OAASC,EAAG,CACV,IAAIC,EAAM,mBACND,aAAaE,IAAWD,EAAMD,EAAE,SACpCjB,EAAQ,UAAY,uBAAuBK,EAAEa,CAAU,CAAC,QAC1D,QAAE,CACA/B,GAAQa,EAAS,EAAK,CACxB,CAEA,MAAO,IAAM,CACXI,EAAW,MAAM,CACnB,CACF,CCxHA,IAAMgB,EAAU,SAAS,eAAe,SAAS,EAC3CC,GAAW,SAAS,eAAe,cAAc,EAEvD,eAAeC,GAAWC,EAAsC,CAC9D,IAAMC,EAAkC,CAAC,EACnCC,EAAWC,EAAa,EAC1BD,IAAUD,EAAQ,qBAAqB,EAAIC,GAC/C,IAAME,EAAM,IAAI,IAAI,gBAAiB,OAAO,SAAS,IAAI,EACzDA,EAAI,aAAa,IAAI,SAAUJ,CAAM,EACrC,IAAMK,EAAO,MAAM,MAAMD,EAAI,SAAS,EAAG,CAAE,QAAAH,CAAQ,CAAC,EACpD,GAAI,CAACI,EAAK,GAAI,MAAM,IAAI,MAAM,kBAAkB,EAChD,OAAQ,MAAMA,EAAK,KAAK,CAC1B,CAEA,eAAsBC,GAAkBC,EAA6C,CAnBrF,IAAAC,EAAAC,EAoBE,GAAI,CAACZ,EAAS,OACdA,EAAQ,aAAa,YAAa,MAAM,EACxCA,EAAQ,UAAY,GAEhBC,KAAUA,GAAS,OAAS,IAE5BS,IACFA,EAAQ,YAAcG,EAAE,cAAc,GAGxC,IAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAY,OACjB,IAAMC,EAAK,SAAS,cAAc,IAAI,EACtCA,EAAG,YAAcF,EAAE,SAAS,EAC5BC,EAAK,YAAYC,CAAE,EAEnB,IAAMC,EAAK,SAAS,cAAc,IAAI,EACtCA,EAAG,UAAY,eACfF,EAAK,YAAYE,CAAE,EACnBhB,EAAQ,YAAYc,CAAI,EAExB,GAAI,CACF,IAAMG,EAAgBC,GAAW,EAC3BC,EAAO,MAAMjB,GAAWe,CAAa,EACrCG,EAAO,MAAMC,GAAUV,EAAAQ,EAAK,WAAL,KAAAR,EAAiBM,CAAa,EAEvDP,IACFA,EAAQ,YAAcG,EAAE,cAAc,GAGxC,IAAMS,EAAgB,IACR,IAAI,IAAI,OAAO,SAAS,IAAI,EAAE,aAAa,IAAI,QAAQ,IACpD,eAAiB,eAAiB,SAGnDP,EAAG,YAAcF,EAAE,SAAS,EAE5B,IAAMU,GAAQX,EAAAO,EAAK,WAAL,KAAAP,EAAiB,CAAC,EAChC,GAAIW,EAAM,SAAW,EAAG,CACtB,IAAMC,EAAI,SAAS,cAAc,GAAG,EACpCA,EAAE,UAAY,gBACdA,EAAE,YAAcX,EAAE,aAAa,EAC/Bb,EAAQ,YAAYwB,CAAC,CACvB,MACED,EAAM,QAASE,GAAO,CACpB,IAAMC,EAAK,SAAS,cAAc,IAAI,EAChCC,EAAI,SAAS,cAAc,GAAG,EACpCA,EAAE,KAAO,IACTA,EAAE,YAAc,IAAI,KAAKF,EAAG,WAAa,GAAI,EAAE,eAAeL,CAAI,EAClEO,EAAE,QAAWC,GAAM,CACjBA,EAAE,eAAe,EACjB,IAAMrB,EAAM,IAAI,IAAI,OAAO,SAAS,IAAI,EACxCA,EAAI,aAAa,IAAI,KAAM,OAAOkB,EAAG,EAAE,CAAC,EACxC,QAAQ,aAAa,CAAC,EAAG,GAAIlB,EAAI,SAAS,CAAC,EAC3CsB,EAAY,QAAQ,CACtB,EACAH,EAAG,YAAYC,CAAC,EAChBX,EAAG,YAAYU,CAAE,CACnB,CAAC,CAEL,OAAQE,EAAA,CACN,IAAME,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,UAAY,cAChBA,EAAI,YAAcjB,EAAE,kBAAkB,EACtCb,EAAQ,YAAY8B,CAAG,CACzB,QAAE,CACA9B,EAAQ,gBAAgB,WAAW,CACrC,CACF,CChFA,SAAS+B,IAAgD,CACvD,IAAMC,EAAW,SAAS,eAAe,UAAU,EACnD,GAAI,CAACA,EAAU,OAAO,KAEtBA,EAAS,UAAY,GACrB,IAAMC,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAY,iBAEnB,IAAMC,EAAS,SAAS,cAAc,QAAQ,EAC9C,OAAAA,EAAO,KAAO,SACdA,EAAO,GAAK,iBACZA,EAAO,UAAY,iBACnBA,EAAO,SAAW,GAClBD,EAAO,YAAYC,CAAM,EAEzBF,EAAS,YAAYC,CAAM,EACpBC,CACT,CAEA,SAASC,IAAuD,CAC9D,GAAI,CAGF,OAFU,IAAI,IAAI,OAAO,SAAS,IAAI,EACvB,aAAa,IAAI,QAAQ,GAAK,IAAI,YAAY,IAC9C,eAAiB,eAAiB,QACnD,OAAQ,GACN,MAAO,QACT,CACF,CAEA,eAAeC,GACbC,EACAC,EAOAC,EACe,CACf,GAAM,CAAE,cAAAC,EAAe,QAAAC,CAAQ,EAAIH,EACnC,GAAIC,EAAQ,QACV,GAAI,CAAEA,EAAQ,QAAQ,CAAG,OAAQG,EAAA,CAAC,CAIpC,GAFAH,EAAQ,QAAU,OAEdF,EAAM,OAAS,UAAW,CAC5B,IAAMM,EAASR,GAA0B,EACrCK,IACFA,EAAc,SAAW,IAE3B,MAAMI,GAAkBH,GAAA,KAAAA,EAAW,MAAS,EACxCD,IACFA,EAAc,YAAcK,EAAE,MAAM,EACpCL,EAAc,SAAW,GACzBA,EAAc,QAAU,IAAMM,EAAYH,CAAM,GAElD,MACF,CAEIH,IACFA,EAAc,SAAW,IAG3B,IAAMO,EAAU,MAAMC,GACpB,CACE,KAAMV,EAAI,KACV,QAASA,EAAI,QACb,OAAQA,EAAI,OACZ,OAAQE,EACR,QAAAC,CACF,EACAJ,EAAM,MACR,EACAE,EAAQ,QAAUQ,EAEdP,IACFA,EAAc,YAAcK,EAAE,sBAAsB,EACpDL,EAAc,SAAW,GACzBA,EAAc,QAAU,IAAMS,EAAY,EAE9C,CAEA,eAAeC,IAA2B,CACxC,IAAMC,EAAO,SAAS,eAAe,KAAK,EACpCC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAS,SAAS,eAAe,cAAc,EAC/CZ,EAAU,SAAS,eAAe,YAAY,EACpD,GAAI,CAACU,GAAQ,CAACC,GAAW,CAACC,EAAQ,OAElC,GAAI,CAAE,MAAMC,EAAU,CAAG,OAAQZ,EAAA,CAAC,CAElCa,EAAU,EACVC,GAAmB,EAEnB,IAAMhB,EAAgBT,GAAoB,EACpCQ,EAAmC,CAAC,EAE1CkB,EAAepB,GAAU,CAClBD,GAAYC,EAAO,CAAE,KAAAc,EAAM,QAAAC,EAAS,OAAAC,EAAQ,cAAAb,EAAe,QAAAC,CAAQ,EAAGF,CAAO,CACpF,CAAC,EAEDmB,EAAW,CACb,CAEAR,GAAU",
  "names": ["LANG_MAP", "resolveLangCode", "raw", "_a", "normalized", "direct", "base", "fallbackEn", "messages", "loadMessages", "code", "res", "__spreadValues", "e", "interpolate", "template", "vars", "_", "key", "value", "t", "applyLang", "_b", "_c", "incoming", "tg", "listeners", "parseRoute", "loc", "url", "goToHistory", "emit", "goToProgram", "source", "r", "cb", "initRouter", "onRouteChange", "KNOWN_LOCALES", "LOCALE_ALIASES", "normalizeLocale", "raw", "fallback", "lower", "HttpError", "status", "message", "statusToMessage", "getJSON", "url", "options", "resp", "isStructuredProgram", "data", "getProgram", "programId", "a", "b", "_a", "_b", "_c", "_d", "_e", "_f", "locale", "opts", "tg", "lc", "e", "params", "value", "key", "headers", "fromResponse", "resolvedLocale", "programLocale", "__spreadProps", "__spreadValues", "createdAtRaw", "createdAt", "fmtDate", "value", "locale", "date", "ensureWeeks", "program", "parseLegacyExerciseLine", "line", "trimmed", "withoutMarker", "base", "presentation", "extractExercisePresentation", "separators", "pattern", "offset", "match", "splitIndex", "name", "details", "LEADING_NUMBER_PATTERN", "NOISE_TOKEN_PATTERN", "NOISE_TOKEN_GLOBAL_PATTERN", "stripNoiseTokens", "isNoiseToken", "normalized", "_a", "raw", "segments", "segment", "primary", "cleanedTitle", "title", "extraDetails", "uniqueDetails", "sanitizeNote", "createExerciseItem", "ex", "index", "li", "summary", "indexLabel", "titleLabel", "metaParts", "content", "note", "meaningfulMeta", "part", "meta", "notes", "renderDay", "day", "t", "customTitle", "fallback", "list", "idx", "renderProgramDays", "fragment", "week", "wrap", "h2", "renderLegacyProgram", "text", "_locale", "p", "block", "lines", "l", "exercises", "i", "parsed", "fakeDay", "getWebApp", "_a", "_b", "e", "tmeReady", "tmeExpand", "HEX_COLOR_PATTERN", "normalizeHexColor", "value", "trimmed", "tmeMatchBackground", "_c", "_d", "webApp", "primary", "fallback", "color", "readInitData", "LOCALE_MAP", "normalizeLocale", "raw", "normalized", "base", "readLocale", "setBusy", "node", "busy", "getProgramIdFromURL", "normalizeDateNode", "rawEl", "root", "dateEl", "span", "wrapper", "mountProgramView", "ctx", "source", "content", "titleEl", "initData", "readInitData", "controller", "t", "programId", "load", "getProgram", "appliedLocale", "applyLang", "locale", "fmtDate", "rendered", "renderProgramDays", "renderLegacyProgram", "tmeReady", "e", "key", "HttpError", "content", "dateChip", "getHistory", "locale", "headers", "initData", "readInitData", "url", "resp", "renderHistoryView", "titleEl", "_a", "_b", "t", "wrap", "h2", "ul", "requestLocale", "readLocale", "data", "lang", "applyLang", "resolveSource", "items", "p", "it", "li", "a", "e", "goToProgram", "err", "ensureHistoryButton", "controls", "footer", "button", "resolveSourceFromLocation", "handleRoute", "route", "ctx", "cleanup", "historyButton", "titleEl", "e", "source", "renderHistoryView", "t", "goToProgram", "dispose", "mountProgramView", "goToHistory", "bootstrap", "root", "content", "dateEl", "applyLang", "tmeExpand", "tmeMatchBackground", "onRouteChange", "initRouter"]
}
