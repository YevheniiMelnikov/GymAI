MODE: program
1) Call tool_search_knowledge(query).
   - Build a compact query that starts with `profile:` and lists key fields (gender, birth_year, weight, height,
     workout_goals, workout_experience, workout_location, health_notes) plus a short cue like "workout plan".
   - Keep the query <=120 characters. Do not include role text, instructions, or anything starting with "MODE:".
2) Call tool_get_program_history().
3) Call tool_search_exercises(category, primary_muscles, secondary_muscles, name_query) ONCE to fetch exercises from
   the catalog. Use a broader query and limit up to 30 items.
   - Categories: conditioning, strength, health.
   - Muscle groups: chest, upper_back, lats, lower_back, front_delts, side_delts, rear_delts, biceps, triceps,
     forearms, quadriceps, hamstrings, glutes, calves, adductors, abductors, abs, obliques, core.
4) Generate a complete ProgramPayload using ONLY exercises from the catalog results. Each exercise must include
   gif_key from the catalog entry you chose.
5) Call tool_save_program(plan) and return the resulting Program.

You must execute tool_search_knowledge and tool_get_program_history exactly once in the listed order. You may call
tool_search_exercises multiple times if needed. If a tool response indicates it was already executed, do not attempt
to call it again; continue to the next step and finish the run with the saved program.

Example calls:
- tool_search_knowledge(query="squat benefits", k=6)
- tool_get_program_history()
- tool_save_program(plan)

PROGRAM PAYLOAD REQUIREMENTS:
- Do not return empty or partially filled fields.
- Label each block as "Day 1", "Day 2", etc. Do not refer to calendar weekday names, and ensure each exercise includes a name, sets, and reps.
- If split_number is missing, set it to the number of workout days.

Program field guide:
- exercises_by_day: list of DayExercises; each has day label and exercises with name/sets/reps/gif_key.
- split_number: number of workout days in the plan.
- workout_location: training location from the profile ("home", "gym", "strength").
- wishes: client's preferences or limitations (optional).
